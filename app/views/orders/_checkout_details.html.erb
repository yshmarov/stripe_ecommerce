<% if order.checkout_session.present? && !order.draft? %>
  <div class="space-y-6">
    <%# Order Summary %>
    <div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4">
      <h3 class="text-sm font-medium text-gray-900 dark:text-white mb-4">
        <%= t("activerecord.attributes.order.checkout_session.created") %>
        <span class="text-gray-600 dark:text-gray-400">
          <%= Time.at(order.stripe_checkout_session_object.created).strftime("%d %h %Y, %H:%M") %>
        </span>
      </h3>

      <div class="space-y-3">
        <div class="flex justify-between text-sm">
          <span class="text-gray-600 dark:text-gray-400">
            <%= t("activerecord.attributes.order.checkout_session.amount_subtotal") %>
          </span>
          <span class="text-gray-900 dark:text-white font-medium">
            <%= number_to_currency(order.stripe_checkout_session_object.amount_subtotal.to_f / 100, unit: currency_code_to_symbol(order.currency)) %>
          </span>
        </div>

        <div class="flex justify-between text-sm">
          <span class="text-gray-600 dark:text-gray-400">
            <%= t("activerecord.attributes.order.checkout_session.total_details.amount_tax") %>
          </span>
          <span class="text-gray-900 dark:text-white font-medium">
            <%= number_to_currency(order.stripe_checkout_session_object.total_details.amount_tax.to_f / 100, unit: currency_code_to_symbol(order.currency)) %>
          </span>
        </div>

        <div class="flex justify-between text-sm">
          <span class="text-gray-600 dark:text-gray-400">
            <%= t("activerecord.attributes.order.checkout_session.total_details.amount_shipping") %>
          </span>
          <span class="text-gray-900 dark:text-white font-medium">
            <%= number_to_currency(order.stripe_checkout_session_object.total_details.amount_shipping.to_f / 100, unit: currency_code_to_symbol(order.currency)) %>
          </span>
        </div>

        <% if order.stripe_checkout_session_object.total_details.amount_discount.positive? %>
          <div class="flex justify-between text-sm">
            <span class="text-gray-600 dark:text-gray-400">
              <%= t("activerecord.attributes.order.checkout_session.total_details.amount_discount") %>
            </span>
            <span class="text-green-600 dark:text-green-400 font-medium">
              -<%= number_to_currency(order.stripe_checkout_session_object.total_details.amount_discount.to_f / 100, unit: currency_code_to_symbol(order.currency)) %>
            </span>
          </div>
        <% end %>

        <div class="pt-3 border-t border-gray-200 dark:border-gray-600">
          <div class="flex justify-between">
            <span class="text-base font-medium text-gray-900 dark:text-white">
              <%= t("activerecord.attributes.order.checkout_session.amount_total") %>
            </span>
            <span class="text-base font-medium text-gray-900 dark:text-white">
              <%= number_to_currency(order.stripe_checkout_session_object.amount_total.to_f / 100, unit: currency_code_to_symbol(order.currency)) %>
            </span>
          </div>
        </div>
      </div>
    </div>

    <%# Customer Details %>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <%# Contact Information %>
      <div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4">
        <h3 class="text-sm font-medium text-gray-900 dark:text-white mb-4">
          <%= t("activerecord.attributes.order.contact_information") %>
        </h3>

        <div class="space-y-3">
          <div class="flex items-center gap-2 text-sm">
            <i class="fa-regular fa-envelope text-gray-400 w-4"></i>
            <span class="text-gray-900 dark:text-white">
              <%= order.stripe_checkout_session_object.customer_details.email %>
            </span>
          </div>

          <div class="flex items-center gap-2 text-sm">
            <i class="fa-regular fa-user text-gray-400 w-4"></i>
            <span class="text-gray-900 dark:text-white">
              <%= order.stripe_checkout_session_object.customer_details.name %>
            </span>
          </div>

          <div class="flex items-center gap-2 text-sm">
            <i class="fa-solid fa-phone text-gray-400 w-4"></i>
            <span class="text-gray-900 dark:text-white">
              <%= order.stripe_checkout_session_object.customer_details.phone %>
            </span>
          </div>
        </div>
      </div>

      <%# Shipping Information %>
      <% if order.stripe_checkout_session_object.shipping_details.present? %>
        <div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4">
          <h3 class="text-sm font-medium text-gray-900 dark:text-white mb-4">
            <%= t("activerecord.attributes.order.shipping_information") %>
          </h3>

          <div class="space-y-3">
            <div class="flex items-start gap-2 text-sm">
              <i class="fa-solid fa-location-dot text-gray-400 w-4 mt-1"></i>
              <div>
                <div class="text-gray-900 dark:text-white font-medium">
                  <%= order.stripe_checkout_session_object.shipping_details.name %>
                </div>
                <div class="text-gray-600 dark:text-gray-400">
                  <%= order.stripe_checkout_session_object.shipping_details.address.values.join(", ") %>
                </div>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
